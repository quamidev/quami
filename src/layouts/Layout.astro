---
interface Props {
  title: string;
  description?: string;
}

const { title, description = "Somos un estudio de desarrollo enfocado en crear experiencias digitales que funcionan." } = Astro.props;
---

<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet" />
    <title>{title}</title>
  </head>
  <body>
    <!-- Scroll Progress Indicator -->
    <div id="scroll-progress" class="scroll-progress"></div>
    <slot />
    <script>
      // Theme toggle - runs immediately to prevent flash
      (function() {
        const stored = localStorage.getItem('theme');
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (stored === 'dark' || (!stored && prefersDark)) {
          document.documentElement.setAttribute('data-theme', 'dark');
        }
      })();
    </script>
    <script>
      // Theme toggle functionality
      function initThemeToggle() {
        const toggle = document.getElementById('theme-toggle');
        if (!toggle) return;

        function setTheme(theme: string) {
          document.documentElement.setAttribute('data-theme', theme);
          localStorage.setItem('theme', theme);
          updateToggleIcon(theme);
        }

        function updateToggleIcon(theme: string) {
          const sunIcon = toggle.querySelector('.icon-sun');
          const moonIcon = toggle.querySelector('.icon-moon');
          if (sunIcon && moonIcon) {
            sunIcon.style.display = theme === 'dark' ? 'block' : 'none';
            moonIcon.style.display = theme === 'dark' ? 'none' : 'block';
          }
        }

        toggle.addEventListener('click', () => {
          const current = document.documentElement.getAttribute('data-theme');
          setTheme(current === 'dark' ? 'light' : 'dark');
        });

        // Initialize icon state
        const current = document.documentElement.getAttribute('data-theme') || 'light';
        updateToggleIcon(current);
      }

      // Intersection Observer for animations
      const observerOptions = {
        root: null,
        rootMargin: '0px',
        threshold: 0.1
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
          }
        });
      }, observerOptions);

      document.querySelectorAll('.animate-on-scroll').forEach(el => {
        observer.observe(el);
      });

      // Initialize theme toggle
      initThemeToggle();

      // Scroll progress indicator
      const scrollProgress = document.getElementById('scroll-progress');
      if (scrollProgress) {
        window.addEventListener('scroll', () => {
          const scrollTop = window.scrollY;
          const docHeight = document.documentElement.scrollHeight - window.innerHeight;
          const scrollPercent = (scrollTop / docHeight) * 100;
          scrollProgress.style.width = scrollPercent + '%';
        });
      }
    </script>
  </body>
</html>

<style is:global>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  :root {
    --yellow: #FDE68A;
    --yellow-dark: #F59E0B;
    --blue: #93C5FD;
    --blue-dark: #3B82F6;
    --black: #0A0A0A;
    --white: #FAFAFA;
    --gray-100: #F4F4F5;
    --gray-200: #E4E4E7;
    --gray-400: #A1A1AA;
    --gray-500: #71717A;
    --gray-600: #52525B;
    --gray-800: #27272A;
  }

  /* Dark Mode - Rich charcoal palette */
  [data-theme="dark"] {
    --black: #F5F5F4;
    --white: #171717;
    --gray-100: #1C1C1C;
    --gray-200: #262626;
    --gray-400: #737373;
    --gray-500: #A3A3A3;
    --gray-600: #D4D4D4;
    --gray-800: #404040;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    color: var(--black);
    line-height: 1.5;
    background: var(--white);
    -webkit-font-smoothing: antialiased;
  }

  /* Animations */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes slideInLeft {
    from {
      opacity: 0;
      transform: translateX(-20px);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }

  @keyframes lineExpand {
    from { transform: scaleX(0); }
    to { transform: scaleX(1); }
  }

  @keyframes heroGraphicsIn {
    from {
      opacity: 0;
      transform: translateY(-45%);
    }
    to {
      opacity: 1;
      transform: translateY(-50%);
    }
  }

  .animate-on-scroll {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.6s ease, transform 0.6s ease;
  }

  .animate-on-scroll.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .delay-1 { transition-delay: 0.1s; }
  .delay-2 { transition-delay: 0.2s; }
  .delay-3 { transition-delay: 0.3s; }
  .delay-4 { transition-delay: 0.4s; }

  /* Scroll Progress Indicator */
  .scroll-progress {
    position: fixed;
    top: 0;
    left: 0;
    height: 3px;
    width: 0%;
    background: linear-gradient(90deg, var(--yellow) 0%, var(--yellow-dark) 100%);
    z-index: 1001;
    transition: width 0.1s ease-out;
  }
</style>
